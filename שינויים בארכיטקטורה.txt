# מסמך דרישות: שדרוג מערכת אימות המורים ב-fireClass
**גרסה**: 1.0
**תאריך**: 17 ביולי 2025

---
## 1. מבוא ומטרה
[cite_start]נכון להיום, מערכת fireClass משתמשת במנגנון אימות אנונימי עבור מורים[cite: 9, 133]. מטרת שדרוג זה היא להחליף את המנגנון הקיים במערכת אימות מלאה ומזוהה, המבוססת על ספקים חיצוניים (Google ו-Microsoft). שדרוג זה יאפשר יצירת פרופיל קבוע לכל מורה, ישפר את אבטחת המערכת, ויניח את התשתית לפיתוח יכולות עתידיות כגון היסטוריית שיעורים אישית והגדרות מותאמות.

---
## 2. סיפורי משתמש (User Stories)
* **כמורה חדש**, אני רוצה להתחבר למערכת באמצעות חשבון הגוגל שלי, כך שהמערכת תיצור עבורי פרופיל אישי באופן אוטומטי ואוכל להתחיל לעבוד מיד.
* **כמורה חוזר**, אני רוצה שהמערכת תזהה אותי כשאני מתחבר, כדי שאוכל לגשת לנתונים ולהגדרות שלי.
* **כמורה**, אני רוצה שתהליך ההתחברות יהיה מאובטח וישתמש בספק מוכר, כדי שלא אצטרך לזכור סיסמה נוספת.

---
## 3. דרישות פונקציונליות (Functional Requirements)

| מזהה | דרישה | תיאור |
| :--- | :--- | :--- |
| **FR-1** | **ממשק התחברות** | המערכת תציג ממשק התחברות למשתמשים שאינם מאומתים. |
| **FR-2** | **תמיכה בספקים** | המערכת תתמוך באימות באמצעות Google ו-Microsoft. |
| **FR-3** | **יצירת פרופיל מורה** | בפעם הראשונה שמורה מתחבר בהצלחה, המערכת תיצור עבורו מסמך חדש באוסף `teachers/{user.uid}` ב-Firestore. |
| **FR-4** | **תוכן פרופיל המורה** | מסמך המורה יכיל את השדות הבאים לפחות: שם (`displayName`), אימייל (`email`), כתובת תמונה (`photoURL`), וחותמת זמן של יצירת הפרופיל (`created_at`). |
| **FR-5** | **זיהוי מורה חוזר** | בהתחברות של מורה קיים, המערכת תזהה את הפרופיל שלו על פי ה-UID ותעדכן חותמת זמן של כניסה אחרונה (`last_login`), אך לא תיצור פרופיל חדש. |
| **FR-6** | **שיוך חדר למורה** | [cite_start]כל חדר לימוד חדש שייווצר, ישויך ל-UID של המורה המחובר[cite: 306]. |
| **FR-7** | **שמירת מצב התחברות** | המערכת תשמור על מצב ההתחברות של המורה גם לאחר רענון הדף. |
| **FR-8** | **יכולת התנתקות** | המערכת תספק למורה דרך ברורה להתנתק מחשבונו. |

---
## 4. דרישות לא-פונקציונליות (Non-Functional Requirements)

| מזהה | דרישה | תיאור |
| :--- | :--- | :--- |
| **NFR-1** | **אבטחה** | תהליך האימות יתבצע בפרוטוקול OAuth 2.0 סטנדרטי מול הספקים. האפליקציה לא תטפל או תשמור סיסמאות או מידע רגיש. |
| **NFR-2** | **חווית משתמש** | תהליך ההתחברות יהיה מהיר וחלק. המעבר ממסך ההתחברות לדאשבורד יהיה רציף. |

---
## 5. מחוץ לתחום (Out of Scope)

* [cite_start]**אימות תלמידים**: שדרוג זה אינו משפיע על מודל אימות התלמידים, אשר נשאר מבוסס על מזהה זמני (`session-based ID`)[cite: 12, 133].
* **ניהול פרופיל**: שלב זה אינו כולל פיתוח ממשק משתמש למורה לעריכת פרטי הפרופיל שלו.
* **שחזור סיסמה**: אין צורך במנגנון שחזור סיסמה, מכיוון שהאחריות על כך היא של ספק האימות (גוגל/מיקרוסופט).